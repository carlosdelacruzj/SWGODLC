<div class="dashboard-ecommerce">

  <div class="container-fluid dashboard-content ">

    <div class="container-fluid" *ngIf="botonVisualizar && botonRegistrar">

      <!-- btn Registrar -->
      <div style="text-align:right">
        <p>
          <button type="button" (click)="mostrarRegistro()" class="btn btn-primary">Registro</button>
        </p>
      </div>
      <br>

      <div>
        <!-- titulo -->
        <h1>PEDIDO</h1>
        <mat-divider></mat-divider>
      </div>


      <table mat-table [dataSource]="pedidos" class="table" *ngIf="pedidos_ready">

        <!-- ID -->
        <ng-container matColumnDef="ID">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let element"> {{element.ID}} </td>
        </ng-container>

        <!-- Nombre A REVISION -->
        <ng-container matColumnDef="Nombre">
          <th mat-header-cell *matHeaderCellDef> Nombre </th>
          <td mat-cell *matCellDef="let element"> {{element.Nombre}} </td>
        </ng-container>

        <!-- Fecha Evento -->
        <ng-container matColumnDef="Fecha">
          <th mat-header-cell *matHeaderCellDef> Fecha </th>
          <td mat-cell *matCellDef="let element"> {{element.Fecha}} </td>
        </ng-container>
        <!-- Servicio -->
        <ng-container matColumnDef="Servicio">
          <th mat-header-cell *matHeaderCellDef> Servicio </th>
          <td mat-cell *matCellDef="let element"> {{element.Servicio}} </td>
        </ng-container>
        <!-- Evento -->
        <ng-container matColumnDef="Evento">
          <th mat-header-cell *matHeaderCellDef> Evento </th>
          <td mat-cell *matCellDef="let element"> {{element.Evento}} </td>
        </ng-container>
        <!-- Cliente -->
        <ng-container matColumnDef="Cliente">
          <th mat-header-cell *matHeaderCellDef> Cliente</th>
          <td mat-cell *matCellDef="let element"> {{element.Cliente}} </td>
        </ng-container>
        <!-- Estado -->
        <ng-container matColumnDef="Estado">
          <th mat-header-cell *matHeaderCellDef> Estado </th>
          <td mat-cell *matCellDef="let element"> {{element.Estado}} </td>
        </ng-container>
        <!-- Boton Visualizar -->
        <ng-container matColumnDef="Visualizar">
          <th mat-header-cell *matHeaderCellDef> Visualizar </th>
          <td mat-cell *matCellDef="let element"> <button (click)="mostrarDetalles(element.ID)" class="btn mx-auto"
              style="background-color:transparent"><i class="fas fa-eye fa-2x"></i></button> </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
      </table>
      <mat-paginator #paginator [pageSize]="25" [pageSizeOptions]="[10, 25, 100]">
      </mat-paginator>
    </div>


    <!-- INTERFAZ Visualizar  -->

    <div class="container-fluid" *ngIf="!botonVisualizar">
      <h1>{{pedido.NombrePedido}}</h1>
      <mat-divider></mat-divider>
      <br>

      <div class="container-fluid d-flex flex-column">
        <div class="container-fluid d-flex">
          <div class="container w-50">

            <div class="container-fluid">
              <mat-card class="card">
                <mat-card-header class="card-header">
                  <mat-card-title>Detalles de Pedido</mat-card-title>
                </mat-card-header>
              </mat-card>



              <div class="container-fluid">

                <div class="input-group">
                  <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Empleado :</span>
                  <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.Empleado"
                    disabled />
                </div>
                <br>

                <div class="input-group">
                  <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Nº
                    Pedido :</span>
                  <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.N_Pedido"
                    disabled />
                </div>
                <br>

                <div class="input-group">
                  <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Contratante :</span>
                  <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.Cliente"
                    disabled />
                </div>
                <br>

                <div class="input-group">
                  <span style="width:150px;background-color:whitesmoke;" class="input-group-text">F.Registro :</span>
                  <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.F_Registro "
                    disabled />
                </div>
                <br>

                <div class="input-group">
                  <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Estado Pedido :</span>
                  <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.EstadoPedido"
                    disabled />
                </div>
                <br>

              </div>

            </div>

          </div>

          <div class="container w-50">

            <mat-card class="card">
              <mat-card-header class="card-header">
                <mat-card-title>Detalles de Pago</mat-card-title>
              </mat-card-header>
            </mat-card>

            <div class="container-fluid">

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Costo
                  Total :</span>
                <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.Costo_Total"
                  disabled />
              </div>
              <br>

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">A Cuenta
                  :</span>
                <input type="text" aria-label="First name" class="form-control" [(ngModel)]="pedido.Acuenta" disabled />
              </div>
              <br>

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">A Saldo
                  :</span>
                <input type="text" aria-label="First name" class="form-control" [(ngModel)]="saldo" disabled />
              </div>
              <br>

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Estado
                  Pago :</span>
                <input type="text" class="form-control" [(ngModel)]="pedido.EstadoPago" disabled />
              </div>
              <br>

            </div>
          </div>

        </div>

        <br>


        <div class="container-fluid">
          <mat-card class="card">
            <mat-card-header class="card-header">
              <mat-card-title>Detalles de Evento</mat-card-title>
            </mat-card-header>
          </mat-card>

          <div class="container-fluid d-flex">
            <div class="container w-50">

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Evento
                  :</span>
                <input type="text" class="form-control" [(ngModel)]="pedido.Evento" disabled />
              </div>
              <br>

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Servicio
                  :</span>
                <input type="text" class="form-control" [(ngModel)]="pedido.Servicio" disabled />
              </div>
              <br>



              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Fecha
                  Evento
                  :</span>
                <input type="text" class="form-control" name="F_Evento" #F_Evento="ngModel"
                  [(ngModel)]="pedido.F_Evento" disabled>
              </div>
              <br>

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Hora
                  :</span>
                <input type="text" class="form-control" [(ngModel)]="pedido.Hora_Evento" disabled />
              </div>
              <br>

            </div>


            <div class="container w-50">


              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Ubicacion :</span>
                <input type="text" class="form-control" [(ngModel)]="pedido.Direccion" disabled />
              </div>
              <br>

              <div class="input-group">
                <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Descripcion :</span>
                <textarea class="form-control" [(ngModel)]="pedido.Descripcion" cols="mx-auto" rows="mx-auto"
                  disabled></textarea>
              </div>

            </div>

          </div>

        </div>

      </div>
      <mat-divider></mat-divider>
      <br>
      <div class="container-fluid d-flex justify-content-center "> <button (click)="cerrarDetalles()"
          class="btn btn-danger mx-5">Cancelar</button>
        <button type="button" (click)="open(content)" class="btn btn-success mx-5">Editar</button>
      </div>


      <!----MODAL POP UP-->
      <ng-template #content let-modal>
        <div class="modal-header">
          <h2 class="modal-title" id="modal-basic-title">EDITAR PEDIDO</h2>
          <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>


        <div class="modal-body">

          <form>
            <mat-form-field appearance="fill">
              <mat-label>{{pedido.EstadoPedido}}</mat-label>
              <select matNativeControl [(ngModel)]="estadoEditado" name="car">
                <option value="" selected></option>{{pedido.EstadoPedido}}
                <option *ngFor="let car of cars" [value]="car.value">
                  {{car.viewValue}}
                </option>
              </select>
            </mat-form-field>
          </form>

          <form>
            <div class="form-group">
              <label for="dateOfBirth">Fecha Evento</label>
              <div class="input-group">
                <input id="dateOfBirth" class="form-control" [(ngModel)]="fechaEditada" name="dp" ngbDatepicker
                  #dp="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary calendar" (click)="dp.toggle()" type="button"></button>
                </div>
              </div>
            </div>
          </form>

          <form>
            <div class="form-group">
              <label for="dateOfBirth">Hora Evento</label>
              <div class="input-group" > 
                <input id="dateOfBirth" class="form-control" [(ngModel)]="horaEditada" >{{pedido.Hora_Evento}}

              </div>
            </div>
          </form>
        </div>


        <div class="modal-footer">
          <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
          <button type="button" class="btn btn-primary" (click)="editarModal()">Guardar</button>
        </div>
      </ng-template>

      <hr>




      <!------------------------------------------>


    </div>
    <div class="container-fluid" *ngIf="!botonRegistrar">

      <div>
        <!-- titulo -->
        <h1>REGISTRAR PEDIDO</h1>
        <mat-divider></mat-divider>
      </div>
      <br>


      <form action="">
        <mat-card class="card">
          <mat-card-header class="card-header">
            <mat-card-title>Detalles de Pedido</mat-card-title>
          </mat-card-header>
          <mat-card-content class="card-body">
            <div class="form-row">
              <div class="container-fluid d-flex">
                <div class="container w-50">
                  <div class="input-group">
                    <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Cod.Empleado
                      :</span>
                    <input type="text" class="form-control" />
                  </div>
                  <br>
                  <div class="input-group">
                    <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Nº
                      Pedido
                      :</span>
                    <input type="text" class="form-control" [(ngModel)]="nPedido" disabled />
                  </div>
                  <br>
                </div>
                <div class="container w-50">
                  <div class="input-group">
                    <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Fecha
                      registro
                      :</span>
                    <input type="text" class="form-control" [(ngModel)]="fechaActual" disabled />
                  </div>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
        <!-- Detalles Contratante -registro -->
        <mat-card class="card">
          <mat-card-header class="card-header">
            <mat-card-title>Datos del Contratante</mat-card-title>
          </mat-card-header>
          <mat-card-content class="card-body">
            <div class="form-row">
              <div class="container-fluid d-flex">
                <div class="container w-50">
                  <div class="input-group">
                    <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Ingrese
                      DNI
                      :</span>
                    <input type="text" class="form-control" [(ngModel)]="dniCliente" />
                  </div>
                  <br>
                  <div class="input-group">
                    <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Nombres
                      :</span>
                    <input type="text" class="form-control" [(ngModel)]="infoCliente.Nombre" disabled />
                  </div>
                  <br>
                </div>
                <div class="container w-50">
                  <div class="input-group">
                    <button (click)="buscarCliente(dniCliente)" class="btn btn-primary">Buscar</button>
                  </div>
                  <br>
                  <div class="input-group">
                    <span style="width:150px;background-color:whitesmoke;" class="input-group-text">Apellidos
                      :</span>
                    <input type="text" class="form-control" [(ngModel)]="infoCliente.Apellido" disabled />
                  </div>
                  <br>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
        <!-- Registro- detalles de evento -->
        <mat-card class="card">
          <mat-card-header class="card-header">
            <mat-card-title>Detalles del Evento</mat-card-title>
          </mat-card-header>
          <mat-card-content class="card-body">
            <div class="form-row d-flex flex-column justify-content-start align-items-start">
              <select [(ngModel)]="servicioSeleccionado" (ngModelChange)="asignarServicio($event)">
                <option *ngFor="let servicio of servicios" [value]="servicio.ID">{{servicio.Nombre}}
                </option>
              </select>
              <br>
              <select [(ngModel)]="eventoSeleccionado" (ngModelChange)="asignarEvento($event)">
                <option *ngFor="let data of evento" [value]="data.PK_E_Cod">{{data.E_Nombre}}
                </option>
              </select>
              <br>
              <form>
                <div class="form-group">
                  <label for="dateOfBirth">Fecha Evento</label>
                  <div class="input-group">
                    <input id="dateOfBirth" class="form-control" [(ngModel)]="fecharegistrada" name="dp" ngbDatepicker
                      #dp="ngbDatepicker">
                    <div class="input-group-append">
                      <button class="btn btn-outline-secondary calendar" (click)="dp.toggle()" type="button"></button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
            <mat-form-field class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 mb-2 " appearance="fill">
              <mat-label>Hora</mat-label>
              <input matInput placeholder="">
            </mat-form-field>

            <mat-form-field class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 mb-2 " appearance="fill">
              <mat-label>Ubicación</mat-label>
              <input matInput placeholder="">
            </mat-form-field>

          </div>
          <div class="form-row">
            <table class="table">
              <thead>
                <th>Descripcion</th>
                <th>Precio</th>
                <th>Seleccionar</th>
              </thead>
              <tbody>
                <tr *ngFor="let des of descripciones">
                  <th>{{des.Descripcion}}</th>
                  <th>{{des.Precio}}</th>
                  <th>
                    <mat-radio-button value={des.ID} [(ngModel)]="descripcionSeleccionada"></mat-radio-button>
                  </th>
                </tr>
              </tbody>
            </table>
          </div>
        </mat-card-content>
      </mat-card>

      <div class="container-fluid d-flex justify-content-center"><button (click)="cerrarRegistro()"
          class="btn btn-danger mx-5"> Cancelar</button>
        <button class="btn btn-success mx-5">GUARDAR</button>
      </div>



    </div>

  </div>